!function(a){"use strict";a.AxisBuilderHelper=a.AxisBuilderHelper||{},a(document).ready(function(){a.AxisBuilderHelper.tabs(".panels-tab"),a.AxisBuilderHelper.fullscreen(),a.AxisBuilderHelper.check_depedencies(),new a.AxisTooltip({scope:"#axisbuilder-editor",attach:"body"}),new a.AxisBuilderHistory({button:".history-action",canvas:".canvas-area",editor:".canvas-data"})}),a.AxisBuilderHelper.tabs=function(b,c){a(b).each(function(b){var d=0,e=!1,f="axisbuilder_post_"+b+"_"+axisbuilder_admin.post_id;"undefined"!=typeof e&&(e=!0,d=sessionStorage[f]||0);var g,h=a(this),i=h.find(".axisbuilder-tabs li"),j=h.find(".axisbuilder-shortcodes-panel");i.unbind("click").bind("click",function(){i.removeClass("active"),g=a(this).addClass("active");var b=i.index(g);return j.css({display:"none"}).filter(":eq("+b+")").css({display:"block"}),e&&(sessionStorage[f]=b),"undefined"!=typeof c&&c.find(".axisbuilder-tabs a").eq(b).trigger("click"),!1}),i.filter(".active").length||i.filter(":eq("+d+")").addClass("active").trigger("click")})},a.AxisBuilderHelper.fullscreen=function(){function b(){e.addClass("axisbuilder-expanded"),i.addClass("axisbuilder-noscroll-box"),g=e.find(".panels-tab").clone(!0),g.length&&(h=a('<div class="axisbuilder-fullscreen-buttons"></div>').appendTo(g),k.clone(!0).appendTo(h).bind("click",function(){setTimeout(function(){var a=window.open("","wp-preview","");a.focus()},10)}),j.clone(!0).appendTo(h),d.clone(!0).addClass("button button-large button-secondary").appendTo(h),a('<input type="hidden" name="axisbuilder-expanded-hidden" value="'+e.attr("id")+'" />').appendTo(h),f=a('<div class="axisbuilder-fixed-controls"></div>').appendTo(e),g.appendTo(f),a.AxisBuilderHelper.tabs(g,a(".panels-tab:not(.axisbuilder-fixed-controls .panels-tab):first")))}function c(){e.removeClass("axisbuilder-expanded"),i.removeClass("axisbuilder-noscroll-box"),f.length&&f.remove()}var d,e,f,g,h,i=a("body"),j=a("input#publish"),k=a("a#post-preview"),l=a('<div class="axisbuilder-expand-fullscreen"></div>').appendTo(i),m=a(".axisbuilder-expanded").find(".axisbuilder-attach-expand");m.length&&(d=m,e=d.parents(".postbox:eq(0)"),b()),i.on("click",".axisbuilder-attach-expand",function(f){f.preventDefault(),d=a(this),e=d.parents(".postbox:eq(0)"),e.is(".axisbuilder-expanded")?l.css({display:"block",opacity:0}).animate({opacity:1},function(){c(),l.animate({opacity:0},function(){l.css({display:"none"})})}):l.css({display:"block",opacity:0}).animate({opacity:1},function(){b(),l.animate({opacity:0},function(){l.css({display:"none"})})})})},a.AxisBuilderHelper.check_depedencies=function(){var b=a("body");b.on("change",".axisbuilder-style input[type=hidden], .axisbuilder-style input[type=text], .axisbuilder-style input[type=checkbox], .axisbuilder-style textarea, .axisbuilder-style select, .axisbuilder-style radio",function(){var c=a(this),d=c.parents(".axisbuilder-modal:eq(0)");d.length||(d=b);var e=this.id.replace(/axisbuilderTB-/,""),f=d.find('.axisbuilder-form-element-container[data-check-element="'+e+'"]'),g=c.parents(".axisbuilder-form-element-container:eq(0)").is(".axisbuilder-hidden"),h=this.value;return c.is("input[type=checkbox]")&&!c.prop("checked")&&(h=""),f.length?void f.each(function(){var b=!1,c=a(this),d=c.data("check-operator"),e=c.data("check-value");if(!g)switch(d){case"equals":b=h===e?!0:!1;break;case"not":b=h!==e?!0:!1;break;case"is_larger":b=h>e?!0:!1;break;case"is_smaller":b=e>h?!0:!1;break;case"contains":b=-1!==h.indexOf(e)?!0:!1;break;case"doesnot_contain":b=-1===h.indexOf(e)?!0:!1;break;case"is_empty_or":b=""===h||h===e?!0:!1;break;case"not_empty_and":b=""!==h||h!==e?!0:!1}b===!0&&c.is(".axisbuilder-hidden")?(c.css({display:"none"}).removeClass("axisbuilder-hidden").find("select, radio, input[type=checkbox]").trigger("change"),c.slideDown()):b!==!1||c.is(".axisbuilder-hidden")||(c.css({display:"block"}).addClass("axisbuilder-hidden").find("select, radio, input[type=checkbox]").trigger("change"),c.slideDown())}):!0})}}(jQuery);