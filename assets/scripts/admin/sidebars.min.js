/*!
 * jQuery AxisThemes Sidebar Core v1.0
 * Core Functionalities for Axis Sidebars
 *
 * Copyright 2013, AxisThemes
 * Freely distributable under the MIT license.
 */
!function(a){var b=function(){this.widget_wrap=a(".widget-liquid-right"),this.widget_area=a("#widgets-right"),this.widget_add=a("#axis-add-widget-template"),this.create_form(),this.delete_icon(),this.bind_events()};b.prototype={create_form:function(){this.widget_area.prepend(this.widget_add.html()),this.nonce=this.widget_wrap.find('input[name="_axis_nonce_custom_sidebar"]').val()},delete_icon:function(){this.widget_area.find(".sidebar-axis-custom").css("position","relative").append('<div class="axis-delete-sidebar"><br /></div>')},bind_events:function(){this.widget_wrap.on("click",".axis-delete-sidebar",a.proxy(this.delete_sidebar,this))},delete_sidebar:function(b){var c=window.confirm(axisbuilder_admin_sidebars.remove_sidebar_notice),d=a(b.currentTarget).parents(".widgets-holder-wrap:eq(0)"),e=d.find(".sidebar-name h3"),f=e.find(".spinner"),g=a.trim(e.text()),h=this;c&&a.ajax({type:"POST",url:window.ajaxurl,data:{action:axisbuilder_admin_sidebars.delete_sidebar_nonce,name:g,_wpnonce:h.nonce},beforeSend:function(){f.css("display","inline-block")},success:function(b){"axis-sidebar-deleted"===b&&(d.slideUp(200,function(){a(".widget-control-remove",d).trigger("click"),d.remove(),h.widget_area.find(".widgets-holder-wrap .widgets-sortables").each(function(b){a(this).attr("id","sidebar-"+(b+1))}),wpWidgets.saveOrder()}),window.setTimeout(function(){location.reload(!1)},100))}})}},a(function(){new b})}(jQuery);