function AB_Logger(a,b){return"undefined"==typeof console?!0:("undefined"==typeof b&&(b="logger"),void(b===!1?console.log(a):(b="AB_"+b.toUpperCase(),console.log("["+b+"] - "+a))))}!function(a){"use strict";a.AxisBuilder=function(){this.wpDefaultEditor=a("#postdivrich"),this.axisBuilderDebug=axisbuilder_admin.debug||{},this.axisBuilderButton=a("#axisbuilder-button"),this.axisBuilderHandle=a("#axisbuilder-handle").find(".control-bar"),this.axisBuilderCanvas=a("#axisbuilder-canvas").find(".canvas-area"),this.axisBuilderParent=this.axisBuilderCanvas.parents(".postbox:eq(0)"),this.axisBuilderStatus=this.axisBuilderParent.find("input[name=axisbuilder_status]"),this.tinyMceDefined="undefined"!=typeof window.tinyMCE?!0:!1,this.tinyMceVersion=this.tinyMceDefined?window.tinyMCE.majorVersion:!1,this.tinyMceContent=this.tinyMceDefined?window.tinyMCE.get("content"):!1,this.shortcodes=a.AxisBuilderShortcodes||{},this.shortcodeWrap=a(".axisbuilder-shortcodes"),this.builderActivate()},a.AxisBuilder.prototype={builderActivate:function(){this.builderPosition(),this.builderBehaviour()},builderPosition:function(){var b=a("#normal-sortables"),c=b.find(".postbox");this.axisBuilderParent.length&&0!==c.index(this.axisBuilderParent)&&(this.axisBuilderParent.prependTo(b),window.postboxes.save_order(pagenow))},builderBehaviour:function(){var a=this;this.axisBuilderButton.on("click",function(b){b.preventDefault(),a.switchEditors()}),this.shortcodeWrap.on("click",".insert-shortcode",function(){var b=this.hash.replace("#",""),c="instant-insert";return a.shortcodes.fetchShortcodeEditorElement(b,c,a),!1}),this.axisBuilderHandle.on("click","a.trash-data",function(){return!1})},switchEditors:function(){return"active"!==this.axisBuilderStatus.val()?(this.wpDefaultEditor.parent().addClass("axisbuilder-hidden-editor"),this.axisBuilderButton.removeClass("button-primary").addClass("button-secondary").text(this.axisBuilderButton.data("default-editor")),this.axisBuilderParent.removeClass("axisbuilder-hidden"),this.axisBuilderStatus.val("active"),setTimeout(function(){},10)):(this.wpDefaultEditor.parent().removeClass("axisbuilder-hidden-editor"),this.axisBuilderButton.addClass("button-primary").removeClass("button-secondary").text(this.axisBuilderButton.data("page-builder")),this.axisBuilderParent.addClass("axisbuilder-hidden"),this.axisBuilderStatus.val("inactive"),this.axisBuilderCanvas.addClass("loader"),"object"==typeof window.editorExpand&&window.editorExpand.off(),"disable"!==this.axisBuilderDebug&&new AB_Logger("Switching to Classic Editor. Page Builder is in Debug Mode and will empty the textarea so user cant edit shortcode directly","Editor")),!1},sendToBuilderCanvas:function(b){var c=a(b);this.axisBuilderCanvas.append(c),this.activate_element_dragging(),this.activate_element_dropping()},compareVersion:function(a,b){var c,d,e,f=/(\.0)+[^\.]*$/;for(a=(a+"").replace(f,"").split("."),b=(b+"").replace(f,"").split("."),e=Math.min(a.length,b.length),c=0;e>c;c++)if(d=parseInt(a[c],10)-parseInt(b[c],10),0!==d)return d;return a.length-b.length},activate_element_dragging:function(b,c){var d=(a(window),this.compareVersion(a.ui.draggable.version,"1.10.9")<=0?!0:!1);(-1!==navigator.userAgent.indexOf("Safari")||-1!==navigator.userAgent.indexOf("Chrome"))&&(d=!1),d&&new AB_Logger("Drag and drop Positioning fix active");var e=b||this.axisBuilderParent,f={appendTo:"body",handle:">.menu-item-handle",helper:"clone",scroll:!0,zIndex:2e4,cursorAt:{left:20}};"undefined"==typeof c&&(c=":not(.ui-draggable)"),e.find(".axisbuilder-drag"+c).draggable(f),f.cursorAt={left:33,top:33},f.handle=!1,e.find(".insert-shortcode").not(".ui-draggable").draggable(f)},activate_element_dropping:function(a,b){var c=a||this.axisBuilderParent,d={greedy:!0,tolerance:"pointer"};"undefined"==typeof b&&(b=":not(.ui-droppable)"),"destroy"===b&&(c.find(".axisbuilder-drop").droppable("destroy"),b=""),c.find(".axisbuilder-drop"+b).droppable(d)},dropping_allowed:function(a,b){return a.data("dragdrop-level")>b.data("dragdrop-level")?!0:!1}},a(document).ready(function(){a.AxisBuilderObj=new a.AxisBuilder})}(jQuery);