!function(a,b,c){"use strict";a.fn.AxisBuilderBackboneModal=function(b){return this.each(function(){new a.AxisBuilderBackboneModal(a(this),b)})},a.AxisBuilderBackboneModal=function(b,c){var d=a.extend({},a.AxisBuilderBackboneModal.defaultOptions,c);d.template&&new a.AxisBuilderBackboneModal.View({title:d.title,action:d.action,screen:d.screen,message:d.message,template:d.template})},a.AxisBuilderBackboneModal.defaultOptions={title:"",action:"",screen:"",message:"",template:""},a.AxisBuilderBackboneModal.View=b.View.extend({tagName:"div",id:"axisbuilder-backbone-modal-dialog",_title:void 0,_action:void 0,_screen:void 0,_message:void 0,_template:void 0,events:{"click #button-cancel":"cancelButton","click #button-action":"actionButton"},initialize:function(a){this._title=a.title,this._action=a.action,this._screen=a.screen,this._message=a.message,this._template=a.template,c.bindAll(this,"render"),this.render()},render:function(){var b={title:this._title,action:this._action,screen:this._screen,message:this._message};this.$el.attr("tabindex","0").append(c.template(a(this._template).html(),b)),a("body").css({overflow:"hidden"}).append(this.$el);var d=a(".axisbuilder-backbone-modal-content").find("article"),e=d.height(),f=a(window).height()-200;f>400&&(f=400),d.css(e>f?{overflow:"auto",height:f+"px"}:{overflow:"visible",height:e}),a(".axisbuilder-backbone-modal-content").css({"margin-top":"-"+a(".axisbuilder-backbone-modal-content").height()/2+"px"}).addClass(this._screen),a("body").trigger("axisbuilder_backbone_modal_loaded",this._template)},cancelButton:function(b){b.preventDefault(),this.undelegateEvents(),a(document).off("focusin"),a("body").css({overflow:"auto"}),this.remove(),a("body").trigger("axisbuilder_backbone_modal_removed",this._template)},actionButton:function(b){a("body").trigger("axisbuilder_backbone_modal_response",this._template,this.getFormData()),this.cancelButton(b)},getFormData:function(){var b={};return a.each(a("form",this.$el).serializeArray(),function(c,d){b.hasOwnProperty(d.name)?(b[d.name]=a.makeArray(b[d.name]),b[d.name].push(d.value)):b[d.name]=d.value}),b}})}(jQuery,Backbone,_);